modules:
- docassemble.base.util
- docassemble.jcc.abilitytopay.a2papi
- docassemble.jcc.abilitytopay.translations
- docassemble.jcc.abilitytopay.templates
---
features:
  bootstrap theme: style.css
  progress bar: True
  javascript:
    - includes-prototype.js
    - a2p.js
    - version.js
---
metadata:
  title: Ability to Pay
---
include:
  - language-setup.yml
  - questions.yml
---
mandatory: True
code: |
  landing_page_visited
  county
  citation_number
  # if not no_citation_number:
  #   verify_citation
  #   if verify_citation == "name_lookup":
  #     selected_case
  #     case_lookup_results
  # if no_citation_number:
  #   selected_case
  #   case_lookup_results
  selected_case
  case_lookup_results
  how_work
  benefits

  attachment_urls = []
  if benefits["cal_fresh"]:
    calfresh_proof
    if calfresh_proof:
      attachment_urls.append(("CalFresh", calfresh_proof.url_for()))
  if benefits["medi_cal"]:
    medi_cal_proof
    if medi_cal_proof:
      attachment_urls.append(("MediCal", medi_cal_proof.url_for()))
  if benefits["ssi"]:
    ssi_proof
    if ssi_proof:
      attachment_urls.append(("SSI", ssi_proof.url_for()))
  # Hide WIC for now until backend supports WIC. Can enable WIC by uncommenting lines below and in above Public Benefits question.
  #if benefits["wic"]:
  #  wic_proof
  #  if wic_proof:
  #    attachment_urls.append(("wic", wic_proof.url_for()))
  if benefits["ssp"]:
    ssp_proof
    if ssp_proof:
      attachment_urls.append(("SSP", ssp_proof.url_for()))
  if benefits["cr_ga"]:
    cr_ga_proof
    if cr_ga_proof:
      attachment_urls.append(("CRGA", cr_ga_proof.url_for()))
  if benefits["ihss"]:
    ihss_proof
    if ihss_proof:
      attachment_urls.append(("IHSS", ihss_proof.url_for()))
  if benefits["cal_works"]:
    cal_works_proof
    if cal_works_proof:
      attachment_urls.append(("CalWorks", cal_works_proof.url_for()))
  if benefits["tanf"]:
    tanf_proof
    if tanf_proof:
      attachment_urls.append(("TANF", tanf_proof.url_for()))
  if benefits["capi"]:
    capi_proof
    if capi_proof:
      attachment_urls.append(("CAPI", capi_proof.url_for()))
  if benefits['other']:
    other_benefit_picture
    if other_benefit_picture:
      attachment_urls.append(("Other", other_benefit_picture.url_for()))
  income
  residents
  monthly_rent
  mortgage
  utilities
  phone_bill
  food
  insurance
  clothing
  child_spousal_support
  transportation
  additional_requests
  citation_pleas
  tool_helpful
  email_address
  submission_signature
  ready_to_submit
  submission_success
  all_done
